

package xcom.retro.xa.expressions ;


import java.nio.ByteBuffer ;

import org.antlr.v4.runtime.tree.ParseTreeWalker ;

import xcom.retro.xa.XA.AssemblyContext ;
import xcom.retro.xa.antlr.processors.MOS6502.MOS6502v1_Parser.ArgumentContext ;


public class ExpressionUtils {

	public static _ExprNode buildArgumentExpressionTree(final AssemblyContext actx, final ArgumentContext pctx) {

		final ExpressionV1Listener listener = new ExpressionV1Listener(actx) ;
		final ParseTreeWalker walker = new ParseTreeWalker() ;

//		System.out.println(">>>"+pctx.getText()) ;

		walker.walk(listener, pctx) ;

		return listener.expr ;
	}


	public static Integer asInteger(byte[] value) {
		return ByteBuffer.wrap(value).getInt() ;
	}


	public static byte[] asBytes(int value) {
		return ByteBuffer.allocate(4).putInt(value).array() ;
	}


	public static String asString(byte[] value) {
		return new String(value) ;
	}


	public static byte[] asBytes(String value) {
		return value.getBytes() ;
	}


	public static byte lsb(byte[] bytes) {
		return bytes[bytes.length -1] ;
	}


	public static byte msb(byte[] bytes) {
		return bytes[bytes.length -2] ;
	}
}
